#pragma once

#include <wd/common>
#include <packet/common>

namespace wd {
	class pinger {
		public:
			struct command {
				int request;
				int type;
			};

		public:
			pinger(creator<>* creator, int id, int request, std::string target, uint32_t interval);
			~pinger();

		public:
			void start(int request);
			void stop(int request);
			void destroy(int request);

		private:
			int         _id;
			std::string _target;
			uint32_t    _interval;

			std::shared_ptr<queue<command>> _queue;
			std::thread                     _thread;
	};
}
